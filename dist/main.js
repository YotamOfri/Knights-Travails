(()=>{"use strict";const e=document.querySelector(".board"),t=document.querySelector("#knight-btn"),n=document.createElement("div");function r(i){t.classList.remove("animation");let s=8-i.target.dataset.x,a=8-i.target.dataset.y;n.style.right=12.5*s+"%",n.style.top=12.5*a+"%",n.style.transform="","end_pos"===i.target.id?i.target.offsetParent.append(n):e.append(n),e.removeEventListener("click",r),e.style.cursor="default"}n.setAttribute("id","knight"),t.addEventListener("click",(()=>{e.style.cursor="pointer",document.querySelector(".animation")&&document.querySelector(".animation").classList.remove("animation"),t.classList.add("animation"),e.removeEventListener("click",a),e.addEventListener("click",r)}));const i=document.createElement("div");i.setAttribute("id","end_pos");const s=document.querySelector("#end-place-btn");function a(t){s.classList.remove("animation"),"knight"===t.target.id?t.target.offsetParent.append(i):t.target.append(i),e.removeEventListener("click",a),e.style.cursor="default"}s.addEventListener("click",(()=>{e.style.cursor="pointer",document.querySelector(".animation")&&document.querySelector(".animation").classList.remove("animation"),s.classList.add("animation"),e.removeEventListener("click",r),e.addEventListener("click",a)})),document.querySelector("#start-move-btn").addEventListener("click",(function(){if(document.querySelector(".animation")&&document.querySelector(".animation").classList.remove("animation"),document.querySelector("#knight")&&document.querySelector("#end_pos")){let t=8-Math.round(parseInt(n.style.right)/12.5),r=8-Math.round(parseInt(n.style.top)/12.5),s=i.offsetParent.dataset.x,a=i.offsetParent.dataset.y,o=function(e,t){const n=[];n[JSON.stringify(e)]={steps:0,path:""};const r=[e],i=[e];for(;r[0][0]!==t[0]||r[0][1]!==t[1];){let e=r.shift();(s=e,[[s[0]+1,s[1]-2],[s[0]+1,s[1]+2],[s[0]-1,s[1]-2],[s[0]-1,s[1]+2],[s[0]+2,s[1]-1],[s[0]+2,s[1]+1],[s[0]-2,s[1]-1],[s[0]-2,s[1]+1]].filter((e=>e[0]>=1&&e[0]<=8&&e[1]<=8&&e[1]>=1))).forEach((s=>{JSON.stringify(i).includes(JSON.stringify(s))||(r.push(s),i.push(s),n[JSON.stringify(s)]={steps:n[JSON.stringify(e)].steps+1,path:n[JSON.stringify(e)].path+`[${e}]`}),s[0]!==t[0]||s[1]}))}var s;return n[JSON.stringify(t)]}([parseInt(t),parseInt(r)],[parseInt(s),parseInt(a)]),c=document.querySelector(`[data-x="${t}"][data-y="${r}"]`);c.innerText=0,c.classList.add("visited");let l=function(e){let t=[];for(;e.length>1;){var n=e.substring(10,5).replace(/\[|\]/g,"").split("][");if(0===n[0].length)break;e=e.substring(5),t=[...t,...n.map((function(e){return e.split(",").map(Number)}))]}return t}(o.path+`[${s},${a}]`),d=500;for(let e=0;e<l.length;e++){let t=document.querySelector(`[data-x="${l[e][0]}"][data-y="${l[e][1]}"]`);setTimeout((()=>{var r;r=l[e][0],n.style.right=12.5*(8-r)+"%",setTimeout((()=>{var r;t.innerText=e+1,t.classList.add("visited"),r=l[e][1],n.style.top=12.5*(8-r)+"%"}),400)}),2*d),d+=500}setTimeout((()=>{e.querySelector("#knight").style.transform="scale(0.5)",setTimeout((()=>{n.style.transform+="rotateY(180deg)",n.style.right=parseInt(n.style.right)-2+"%",document.querySelector(`[data-x="${s}"][data-y="${a}"]`).style.paddingRight="20px"}),500)}),2*d)}})),document.querySelector("#clear-board-btn").addEventListener("click",(function(){document.querySelector(".animation")&&document.querySelector(".animation").classList.remove("animation"),e.querySelector("#knight")&&e.querySelector("#knight").remove(),e.querySelector("#end_pos")&&e.querySelector("#end_pos").remove(),document.querySelectorAll(".square").forEach((e=>{e.classList.remove("visited"),e.innerText="",e.style.paddingRight="0px"}))}))})();